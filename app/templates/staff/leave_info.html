<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="//cdn.materialdesignicons.com/2.5.94/css/materialdesignicons.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.8.0/css/bulma.css" />
    <link rel="stylesheet" href="https://unpkg.com/buefy/dist/buefy.min.css"/>
    <title>Title</title>
</head>
<body>
<h1>Welcome {{ current_user.personal_info }}</h1>
<h4>
    สถานะการจ้าง {{ current_user.personal_info.employment.title }}
    <ul>
        <table style="width:100%">
            <thead>
                <th>ประเภทการลา</th>
                <th>จำนวนวันลาที่ใช้</th>
                <th>จำนวนวันลาที่เหลือ</th>
            </thead>
            <tbody>
            {% for type,d in cum_days.iteritems() %}
            <tr>
                <td>{{ type }}</td>
                <td>{{ d }}</td>
                <td>{{ quota_days[type] - d }}</td>
            </tr>
            {% endfor %}
            </tbody>
        </table>
    <hr>
    {% if current_user.personal_info.is_eligible_for_leave %}
    You can request for a leave.
        <table style="width:100%">
            <thead>
            <th>ID</th>
            <th>ชนิด</th>
            <th>ต้องทำงานมากกว่า (เดือน)</th>
            <th>ปีแรกได้ไม่เกิน (วัน)</th>
            <th>สะสมทบปีได้ไม่เกิน (วัน)</th>
            <th colspan="2"></th>
            </thead>
            <tbody>
            {% for quota in current_user.personal_info.employment.quota %}
            <tr>
                <td>{{ quota.id }}</td>
                <td>{{ quota.leave_type }}</td>
                <td>{{ quota.min_employed_months }}</td>
                <td>{{ quota.first_year }}</td>
                <td>{{ quota.cum_max_per_year2 }}</td>
                {% if quota_days[quota.leave_type.type_] - cum_days[quota.leave_type.type_] > 0 %}
                <td><a href="{{ url_for('staff.request_for_leave', quota_id=quota.id) }}">ขออนุมัติลาเต็มวัน</a></td>
                <td><a href="{{ url_for('staff.request_for_leave_period', quota_id=quota.id) }}">ขออนุมัติลาไม่เต็มวัน</a></td>
                {% else %}
                <td>วันลาเต็ม</td>
                <td>วันลาเต็ม</td>
                {% endif %}
            </tr>
            {% endfor %}
            </tbody>
        </table>
    {% else %}
    You cannot request for a leave.
    {% endif %}
</h4>
</div>
</body>
</html>