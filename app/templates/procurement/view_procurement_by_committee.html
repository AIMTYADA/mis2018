{% extends "base.html" %}
{% include "nav.html" %}
{% block page_content %}
<section class="section">
    {% include "messages.html" %}
    <div class="container">
        <div class="columns">
            <div class="column has-text-left">
                <h1 class="title">ข้อมูลครุภัณฑ์ทั้งหมด
                    <a class="button is-warning"
                    href="{{ url_for('procurement.report_info_download') }}">
                     <span class="icon">
                         <i class="fas fa-download"></i>
                     </span>
                     <span>Download รายงานประจำปี</span>
                 </a></h1>
            </div>
        </div>
        <div class="columns">
            <div class="column">
                <table class="table is-fullwidth is-striped" id="proCommitteeTable">
                    <thead>
                        <th>รายการ</th>
                        <th>รหัสครุภัณฑ์</th>
                        <th>ERP</th>
                        <th>สภาพของสินทรัพย์</th>
                        <th>วัน-เวลาที่ตรวจ</th>
                        <th>ผลการตรวจสอบ</th>
                        <th>ชื่อผู้ตรวจสอบ</th>
                        <th>สถานะ</th>
                        <th>Comment</th>
                    </thead>
                    <tbody>
                    </tbody>
                </table>
            </div>
        </div>
        <div class="columns">
            <div class="column">
                <a href="{{ url_for('procurement.committee_first') }}" class="button is-rounded is-info is-light">
                    <span class="icon">
                        <i class="fas fa-arrow-left"></i>
                    </span>
                    <span>กลับ</span>
                </a>
            </div>
        </div>
    </div>
</section>
{% endblock %}
{% block scripts %}
{{ super() }}
    <script>
        $(document).ready(function () {
            $('#proCommitteeTable').DataTable({
                ajax: '{{ url_for("procurement.get_procurement_data_to_committee") }}',
                serverSide: true,
                columns: [
                    {data: 'name'},
                    {data: 'procurement_no'},
                    {data: 'erp_code'},
                    {data: 'available'},
                    {data: 'updated_at'},
                    {data: 'checking_result'},
                    {data: 'approver'},
                    {data: 'status'},
                    {data: 'approver_comment'},

                ],
            });
        });
    </script>
{% endblock %}